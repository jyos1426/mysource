<!-- BEGIN: Subheader -->
<div class="m-subheader">
	<div class="d-flex align-items-center">
		<div class="mr-auto">
			<h3 class="m-subheader__title m-subheader__title--separator">
				트래픽
			</h3>
			<ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
				<li class="m-nav__item m-nav__item--home">
					<a href="#" class="m-nav__link m-nav__link--icon">
						<i class="m-nav__link-icon la la-home"></i>
					</a>
				</li>
				<li class="m-nav__separator">
					-
				</li>
				<li class="m-nav__item">
					<a href="" class="m-nav__link">
						<span class="m-nav__link-text">
							모니터
						</span>
					</a>
				</li>
				<li class="m-nav__separator">
					-
				</li>
				<li class="m-nav__item">
					<a href="" class="m-nav__link">
						<span class="m-nav__link-text">
							트래픽
						</span>
					</a>
				</li>
			</ul>
		</div>
		<!-- <div>
			<div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" data-dropdown-toggle="hover" aria-expanded="true">
				<a href="#" class="m-portlet__nav-link btn btn-lg btn-secondary  m-btn m-btn--outline-2x m-btn--air m-btn--icon m-btn--icon-only m-btn--pill  m-dropdown__toggle">
					<i class="la la-plus m--hide"></i>
					<i class="la la-ellipsis-h"></i>
				</a>
				<div class="m-dropdown__wrapper">
					<span class="m-dropdown__arrow m-dropdown__arrow--right m-dropdown__arrow--adjust"></span>
					<div class="m-dropdown__inner">
						<div class="m-dropdown__body">
							<div class="m-dropdown__content">
								<ul class="m-nav">
									<li class="m-nav__section m-nav__section--first m--hide">
										<span class="m-nav__section-text">
											Quick Actions
										</span>
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<i class="m-nav__link-icon flaticon-share"></i>
											<span class="m-nav__link-text">
												Activity
											</span>
										</a>
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<i class="m-nav__link-icon flaticon-chat-1"></i>
											<span class="m-nav__link-text">
												Messages
											</span>
										</a>
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<i class="m-nav__link-icon flaticon-info"></i>
											<span class="m-nav__link-text">
												FAQ
											</span>
										</a>
									</li>
									<li class="m-nav__item">
										<a href="" class="m-nav__link">
											<i class="m-nav__link-icon flaticon-lifebuoy"></i>
											<span class="m-nav__link-text">
												Support
											</span>
										</a>
									</li>
									<li class="m-nav__separator m-nav__separator--fit"></li>
									<li class="m-nav__item">
										<a href="#" class="btn btn-outline-danger m-btn m-btn--pill m-btn--wide btn-sm">
											Submit
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div> -->
	</div>
</div>
<div class="m-content">
	<!-- toolbar begin -->
	<div class="row">
		<div class="col-lg-12">			
			<div class="m-portlet m-portlet--tabs">
				<div class="m-portlet__head traffic-monitor-portlet-head">
					<div class="m-portlet__head-caption">
						<a class="btn btn-sm btn-brand m-btn m-btn--icon m-btn--icon-only m-btn--custom m-btn--pill m-btn--air" href="#" title="{{playButtonTitle}}" (click)="togglePlayer( $event.target )">
	    				<i class="fa fa-{{playState}}"></i>
	    			</a>
	    			|
	    			<select class="btn btn-select m-btn--air" id="btn_replay_time" title="갱신주기" [ngModel]="replayTime"  (change)="changeReplayTime( $event.target.value )">
			        <option value="3">3초</option>
			        <option value="5" selected>5초</option>
			        <option value="10">10초</option>
			        <option value="15">15초</option>
			        <option value="20">20초</option>
			        <option value="30">30초</option>
			        <option value="60">60초</option>
	      		</select>	 
	      		|	    
	      		<button class="btn btn-sm btn-danger m-btn m-btn--icon m-btn--icon-only m-btn--custom m-btn--pill m-btn--air" data-toggle="modal" title="데이터 초기화" type="button" data-target="#m_modal_init">
							<i class="fa fa-remove"></i>
						</button>
						<div aria-labelledby="exampleModalLabel" class="modal fade" id="m_modal_init" role="dialog" tabindex="-1" aria-hidden="true" style="display: none;">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">
											데이터 초기화
										</h5>
										<button aria-label="Close" class="close" data-dismiss="modal" type="button">
											<span aria-hidden="true">
												×
											</span>
										</button>
									</div>
									<div class="modal-body">
										<p>
											초기화시 금일 트래픽 요약정보 및 트래픽 상세 정보에 누적값, 차트 표시값이 모두 초기화 됩니다. 
											계속 진행하시겠습니까?
										</p>
									</div>
									<div class="modal-footer">
										<button class="btn btn-secondary" data-dismiss="modal" type="button">
											취소
										</button>
										<button class="btn btn-primary" type="button" data-dismiss="modal" (click)="initData()">
											초기화
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="m-portlet__head-tools">
            <ul class="nav nav-tabs m-tabs-line m-tabs-line--brand m-tabs-line--2x m-tabs-line--right" role="tablist">
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link active" id="data-unit-bps" data-toggle="tab" href="#m_tabs" role="tab" (click)="dataUnitChange($event.target)">
                  bps 트래픽
                </a>
              </li>
              <li class="nav-item m-tabs__item">
                <a class="nav-link m-tabs__link" id="data-unit-pps" data-toggle="tab" href="#m_tabs" role="tab" (click)="dataUnitChange($event.target)">
                  pps 트래픽
                </a>
              </li>             
            </ul>
          </div>
				</div>
			</div>
		</div>
	</div> <!-- toolbar end -->
	<!-- last update begin -->
	<div class="row">
    <div class="col-md-12">
      <div class="update-ticker pull-right">
        <span>
          <div *ngIf="loadData" class="m-loader m-loader--brand"></div>
        </span>
        <span title="{{updatedTimeTitle}}">
          Last Updated: {{updatedTime}}
        </span>
      </div>
    </div>
  </div> <!-- last update end -->  
  <!-- summary info begin -->
	<div class="row">
		<div class="col-xl-12">
				<div class="m-portlet m-portlet--full-height traffic-monitor-margin-bottom">
				<div class="m-portlet__head traffic-monitor-portlet-head">
					<div class="m-portlet__head-caption">
						<div class="m-portlet__head-title">
							<h5 class="m-portlet__head-text">
								금일 트래픽 요약정보								
							</h5>							
						</div>
					</div>
					<div class="m-portlet__head-tools">
						<ul class="m-portlet__nav">
							<li class="m-portlet__nav-item">
								<a class="m-portlet__nav-link m-portlet__nav-link--icon" data-portlet-tool="toggle" href="" (click)="isHideSummary = !isHideSummary">											
									<i [ngClass]="isHideSummary ? 'la la-angle-down' : 'la la-angle-up'"></i>
								</a>
							</li>
						</ul>
					</div>							
				</div>						
				<div class="m-portlet__body m-portlet__body--no-padding" [hidden]="isHideSummary">
					<div class="row m-row--no-padding m-row--col-separator-xl">
						<div class="col-md-12 col-lg-12 col-xl-3">
							
							<div class="m-widget1">
								<div class="m-widget1__item">
									<div class="row m-row--no-padding align-items-center">
										<div class="col">									
											<h3 class="m-widget1__title">
												bps(현재/최대)
											</h3>											
										</div>
										<div class="col m--align-right">
											<span class="m-widget1__number m--font-info m--icon-font-size-sm1">	
												{{summary_cur_bps}} / {{summary_max_bps}}
											</span>
										</div>
									</div>
								</div>
							</div>
							
						</div>
						<div class="col-md-12 col-lg-12 col-xl-3">
							
							<div class="m-widget1">
								<div class="m-widget1__item">
									<div class="row m-row--no-padding align-items-center">
										<div class="col">
											<h3 class="m-widget1__title">												
												pps(현재/최대)
											</h3>											
										</div>
										<div class="col m--align-right">
											<span class="m-widget1__number m--font-info m--icon-font-size-sm1">	
												{{summary_cur_pps}} / {{summary_max_pps}}
											</span>
										</div>
									</div>
								</div>
							</div>
							
						</div>
						<div class="col-md-12 col-lg-12 col-xl-3">
							
							<div class="m-widget1">
								<div class="m-widget1__item">
									<div class="row m-row--no-padding align-items-center">
										<div class="col">
											<h3 class="m-widget1__title">
												공격 Bytes(수/%)
											</h3>
										</div>
										<div class="col m--align-right">
											<span class="m-widget1__number m--font-danger m--icon-font-size-sm1">
												{{summary_hack_size}} / {{summary_hack_size_percent}}
											</span>
											<div class="progress m-progress--sm">
												<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="25" class="progress-bar bg-danger" role="progressbar" [style.width]="summary_hack_size_percent"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
							
						</div>
						<div class="col-md-12 col-lg-12 col-xl-3">
							
							<div class="m-widget1">
								<div class="m-widget1__item">
									<div class="row m-row--no-padding align-items-center">
										<div class="col">
											<h3 class="m-widget1__title">
												공격 패킷(수/%)
											</h3>
										</div>
										<div class="col m--align-right">
											<span class="m-widget1__number m--font-danger m--icon-font-size-sm1">
												{{summary_hack_packet}} / {{summary_hack_packet_percent}}
											</span>
											<div class="progress m-progress--sm">
												<div aria-valuemax="100" aria-valuemin="0" aria-valuenow="25" class="progress-bar bg-danger" role="progressbar" [style.width]="summary_hack_packet_percent"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> <!-- summary info end -->
	<div class="tab-content">		
		<div class="tab-pane active" id="m_tabs" role="tabpanel">
			<div class="row" [style.display]="dataUnit == 'bps' ? 'flex' : 'none'">
				<div class="col-xl-12">
					<div class="m-portlet m-portlet--full-height traffic-monitor-margin-bottom">
						<div class="m-portlet__head traffic-monitor-portlet-head">
							<div class="m-portlet__head-caption">
								<div class="m-portlet__head-title">
									<h5 class="m-portlet__head-text">
										인터페이스 별 트래픽 정보
									</h5>
								</div>
							</div>
							<div class="m-portlet__head-tools">
								<ul class="m-portlet__nav">
									<li class="m-portlet__nav-item">
										<a class="m-portlet__nav-link m-portlet__nav-link--icon" data-portlet-tool="toggle" href="" (click)="isHideInterface = !isHideInterface">											
											<i [ngClass]="isHideInterface ? 'la la-angle-down' : 'la la-angle-up'"></i>
										</a>
									</li>
								</ul>
							</div>						
						</div>
						<div class="m-portlet__body m-portlet__body--no-padding" [hidden]="isHideInterface">					
							<div class="row m-row--no-padding m-row--col-separator-xl">
								<div class="col-xl-3" *ngFor="let interface of interfaces; let i = index">
									<traffic-monitor-widget [index]="i" [interfaceID]="interface.id" [interfaceName]="interface.name" [dataUnit]="'bps'" (onSelectWidget)="changeBigChart($event)"></traffic-monitor-widget>
								</div>
							</div>
						</div>
					</div>				
				</div>
			</div> <!-- bps widget chart row end -->
			<div class="row" [style.display]="dataUnit == 'bps' ? 'flex' : 'none'">
				<div class="col-xl-12">
					<div class="m-portlet m-portlet--full-height traffic-monitor-margin-bottom">
						<div class="m-portlet__head traffic-monitor-portlet-head">
							<div class="m-portlet__head-caption">
								<div class="m-portlet__head-title">
									<h5 class="m-portlet__head-text">
										트래픽 상세 정보 - {{selectedInterfaceName}}
									</h5>
								</div>
							</div>
							<div class="m-portlet__head-tools">		
								<ul class="nav nav-tabs m-tabs-line m-tabs-line--info m-tabs-line--2x m-tabs-line--right" role="tablist">
									<li class="nav-item m-tabs__item" [style.display]="selectedInterfaceID==-1 ? 'list-item' : 'none'">
										<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_tab_protocol_bound_bps" role="tab">	
											프로토콜 별 - Inbound/Outbound
										</a>
									</li>
									<li class="nav-item m-tabs__item">
										<a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_tab_protocol_bps" role="tab" #tabProtocolBps>										
											프로토콜 별 - Input/Output
										</a>
									</li>
									<li class="nav-item m-tabs__item" [style.display]="selectedInterfaceID==-1 ? 'list-item' : 'none'">									
										<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_tab_interface_bps" role="tab">	
											인터페이스 별
										</a>
									</li>
								</ul>							
							</div>
						</div>
						<div class="m-portlet__body">
							<div class="tab-content">
								<div class="tab-pane" id="m_tab_protocol_bound_bps">
									<big-chart [chartID]="'by-protocol-bound'" [dataUnit]="'bps'"></big-chart>
								</div>
								<div class="tab-pane active" id="m_tab_protocol_bps">
									<big-chart [chartID]="'by-protocol'" [dataUnit]="'bps'" [hidden]="selectedInterfaceID != -1"></big-chart>
									<div *ngFor="let interface of interfaces; let i = index">
										<big-chart [chartID]="'by-protocol-link'" [dataUnit]="'bps'" [interfaceID]="interface.id" *ngIf="interface.id != -1" [hidden]="selectedInterfaceID != interface.id"></big-chart>
									</div>																		
								</div>
								<div class="tab-pane" id="m_tab_interface_bps">
									<big-chart [chartID]="'by-interface'" [dataUnit]="'bps'"></big-chart>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div> <!-- bps big chart row end -->			
			<div class="row" [style.display]="dataUnit == 'pps' ? 'flex' : 'none'">
				<div class="col-xl-12">
					<div class="m-portlet m-portlet--full-height traffic-monitor-margin-bottom">
						<div class="m-portlet__head traffic-monitor-portlet-head">
							<div class="m-portlet__head-caption">
								<div class="m-portlet__head-title">
									<h5 class="m-portlet__head-text">
										인터페이스 별 트래픽 정보
									</h5>
								</div>
							</div>
							<div class="m-portlet__head-tools">
								<ul class="m-portlet__nav">
									<li class="m-portlet__nav-item">
										<a class="m-portlet__nav-link m-portlet__nav-link--icon" data-portlet-tool="toggle" href="" (click)="isHideInterface = !isHideInterface">											
											<i [ngClass]="isHideInterface ? 'la la-angle-down' : 'la la-angle-up'"></i>
										</a>
									</li>
								</ul>
							</div>						
						</div>
						<div class="m-portlet__body m-portlet__body--no-padding" [hidden]="isHideInterface">					
							<div class="row m-row--no-padding m-row--col-separator-xl">
								<div class="col-xl-3" *ngFor="let interface of interfaces; let i = index">
									<traffic-monitor-widget [index]="i" [interfaceID]="interface.id" [interfaceName]="interface.name" [dataUnit]="'pps'" (onSelectWidget)="changeBigChart($event)"></traffic-monitor-widget>
								</div>
							</div>
						</div>
					</div>				
				</div>
			</div> <!-- pps widget chart row end -->
			<div class="row" [style.display]="dataUnit == 'pps' ? 'flex' : 'none'">
				<div class="col-xl-12">
					<div class="m-portlet m-portlet--full-height traffic-monitor-margin-bottom">
						<div class="m-portlet__head traffic-monitor-portlet-head">
							<div class="m-portlet__head-caption">
								<div class="m-portlet__head-title">
									<h5 class="m-portlet__head-text">
										트래픽 상세 정보 - {{selectedInterfaceName}}
									</h5>
								</div>
							</div>
							<div class="m-portlet__head-tools">								
								<ul class="nav nav-tabs m-tabs-line m-tabs-line--info m-tabs-line--2x m-tabs-line--right" role="tablist">
									<li class="nav-item m-tabs__item" [style.display]="selectedInterfaceID==-1 ? 'list-item' : 'none'">
										<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_tab_protocol_bound_pps" role="tab">	
											프로토콜 별 - Inbound/Outbound
										</a>
									</li>
									<li class="nav-item m-tabs__item">
										<a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_tab_protocol_pps" role="tab" #tabProtocolPps>	
											프로토콜 별 - Input/Output
										</a>
									</li>
									<li class="nav-item m-tabs__item" [style.display]="selectedInterfaceID==-1 ? 'list-item' : 'none'">
										<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_tab_interface_pps" role="tab">
											인터페이스 별
										</a>
									</li>
								</ul>
							</div>
						</div>
						<div class="m-portlet__body">
							<div class="tab-content">
								<div class="tab-pane" id="m_tab_protocol_bound_pps">
									<big-chart [chartID]="'by-protocol-bound'" [dataUnit]="'pps'"></big-chart>
								</div>
								<div class="tab-pane active" id="m_tab_protocol_pps">
									<big-chart [chartID]="'by-protocol'" [dataUnit]="'pps'" [hidden]="selectedInterfaceID != -1"></big-chart>
									<div *ngFor="let interface of interfaces; let i = index">
										<big-chart [chartID]="'by-protocol-link'" [dataUnit]="'pps'" [interfaceID]="interface.id" *ngIf="interface.id != -1" [hidden]="selectedInterfaceID != interface.id"></big-chart>
									</div>
								</div>
								<div class="tab-pane" id="m_tab_interface_pps">
									<big-chart [chartID]="'by-interface'" [dataUnit]="'pps'"></big-chart>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div> <!-- pps big chart row end -->			
		</div>				
	</div>	
</div>
